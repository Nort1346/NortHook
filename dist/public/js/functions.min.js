export function checkIfImageExists(e,t){try{let a=new Image;a.onload=e=>t(!0),a.onerror=e=>t(!1),a.src=e}catch(s){return t(!1)}}export async function isImageURLValid(e){return new Promise(t=>{if(!e.startsWith("https://")&&!e.startsWith("http://"))return t(!1);let a=new Image;a.onload=()=>{t(!0)},a.onerror=()=>{t(!1)};try{a.src=e}catch(s){t(!1)}})}export function generateUniqueId(){return Math.random().toString(36).substr(2,9)}export function insertAfter(e,t){t.parentNode.insertBefore(e,t.nextSibling)}export function formatText(e){e=e.trimStart().trimEnd().replace(/\*\*\*(.*?)\*\*\*/g,"<b><i>$1</i></b>").replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\_\_(.*?)\_\_/g,"<u>$1</u>").replace(/\_(.*?)\_/g,"<i>$1</i>").replace(/~~(.*?)~~/g,"<del>$1</del>").replace(/^### (.*?$)/gm,"<h6><b>$1</b></h6>").replace(/<\/h6>\n/g,"</h6>").replace(/^## (.*?$)/gm,"<h5><b>$1</b></h5>").replace(/<\/h5>\n/g,"</h5>").replace(/^# (.*?$)/gm,"<h4><b>$1</b></h4>").replace(/<\/h4>\n/g,"</h4>").replace(/^>>> (.*?(\n|$)(?:(?!\n{99,}).*?(\n|$))*)/gm,'<blockquote class="quote">$1</blockquote>').replace(/^> (.*?$)/gm,'<blockquote class="quote">$1</blockquote>').replace(/<\/blockquote>\n/g,"</blockquote>").replace(/\|\|(.*?)\|\|/g,'<div class="spoilerText">$1</div>').replace(/\[(.*?)\]\((.*?)\)/g,'<a href="$2" target="_blank">$1</a>');let t=document.createElement("div");return t.innerHTML=e,removeNonUseElements(t),t.innerHTML}async function getEmbedInput(){let e=sessionStorage.getItem("embedInput");if(e)return e;{let t=await fetch("../html/embedInput.html"),a=await t.text();return sessionStorage.setItem("embedInput",a),a}}async function getEmbedVisual(){let e=sessionStorage.getItem("embedVisual");if(e)return e;{let t=await fetch("../html/embedVisual.html"),a=await t.text();return sessionStorage.setItem("embedVisual",a),a}}async function getMessageInput(){let e=sessionStorage.getItem("messageInput");if(e)return e;{let t=await fetch("../html/messageInput.html"),a=await t.text();return sessionStorage.setItem("messageInput",a),a}}async function getMessageVisual(){let e=sessionStorage.getItem("messageVisual");if(e)return e;{let t=await fetch("../html/messageVisual.html"),a=await t.text();return sessionStorage.setItem("messageVisual",a),a}}async function getWebhookUrlInput(){let e=sessionStorage.getItem("webhookUrlInput");if(e)return e;{let t=await fetch("../html/webhookUrlInput.html"),a=await t.text();return sessionStorage.setItem("webhookUrlInput",a),a}}export async function getSaveElement(){let e=sessionStorage.getItem("saveElement");if(e)return e;{let t=await fetch("../html/saveElement.html"),a=await t.text();return sessionStorage.setItem("saveElement",a),a}}export async function getFileVisual(){let e=sessionStorage.getItem("fileVisual");if(e)return e;{let t=await fetch("../html/fileVisual.html"),a=await t.text();return sessionStorage.setItem("fileVisual",a),a}}export async function getFieldInput(){let e=sessionStorage.getItem("fieldInput");if(e)return e;{let t=await fetch("../html/fieldInput.html"),a=await t.text();return sessionStorage.setItem("fieldInput",a),a}}export async function getFieldVisual(){let e=sessionStorage.getItem("fieldVisual");if(e)return e;{let t=await fetch("../html/fieldVisual.html"),a=await t.text();return sessionStorage.setItem("fieldVisual",a),a}}export async function createEmbedInput(e){let t=await getEmbedInput(),a=document.createElement("div");return a.innerHTML=t,a.classList.add("py-1"),e.querySelector(".embedsInput").appendChild(a),a}export async function createEmbedVisual(e){let t=await getEmbedVisual(),a=document.createElement("div");return a.innerHTML=t,a.classList.add("py-1"),e.querySelector(".embedsView").appendChild(a),a}export async function createMessageInput(e){let t=await getMessageInput(),a=document.createElement("div");a.innerHTML=t,a.classList.add("mb-3"),a.id=`messageInput_${e}`;let s=a.querySelector(".profileContentButton");return s.setAttribute("data-bs-target",`#messageInput_${e} .profileContentCollapse`),document.getElementById("messagesInput").appendChild(a),a}export async function createMessageVisual(e){let t=await getMessageVisual(),a=document.createElement("div");return a.innerHTML=t,a.classList.add("mb-3"),a.id=`messageVisual_${e}`,document.getElementById("messagesVisual").appendChild(a),a}export async function createWebhookUrlInput(e){let t=await getWebhookUrlInput(),a=document.createElement("div");return a.innerHTML=t,a.classList.add("mb-2"),a.id=`webhookUrl_${e}`,document.getElementById("webhookUrls").appendChild(a),a}export function formatBytes(e,t=2){if(0===e)return"0 Bytes";let a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(t<0?0:t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]}function removeNonUseElements(e){let t=e.childNodes;for(let a=t.length-1;a>=0;a--){let s=t[a];1!==s.nodeType||"B"===s.tagName||"I"===s.tagName||"U"===s.tagName||"DEL"===s.tagName||"H6"===s.tagName||"H5"===s.tagName||"H4"===s.tagName||"BR"===s.tagName||"BLOCKQUOTE"===s.tagName||"A"===s.tagName||s.classList.contains("spoilerText")||s.classList.contains("headerMax")?1==s.nodeType&&removeNonUseElements(s):e.removeChild(s)}}export function checkWebsiteSize(){let e=window.innerWidth,t=document.getElementById("inputs"),a=document.getElementById("messageView");e>=768?(t.classList.add("show"),a.classList.add("show"),t.classList.add("overflow-y-scroll"),a.classList.add("overflow-y-scroll"),t.classList.remove("h-auto"),a.classList.remove("h-auto")):(t.classList.remove("overflow-y-scroll"),a.classList.remove("overflow-y-scroll"),t.classList.add("h-auto"),a.classList.add("h-auto"),t.classList.contains("show")||a.classList.contains("show")||t.classList.add("show"))}let timeMessages=[];function refreshTimeMessage(){let e=new Date,t=e.getMinutes();timeMessages.forEach(a=>a.innerText=`${e.getHours()}:${t<10?"0":""}${t}`)}refreshAllLocalTimers(),setInterval(refreshTimeMessage,1e3);export function refreshAllLocalTimers(){timeMessages=document.querySelectorAll(".localTime"),refreshTimeMessage()}